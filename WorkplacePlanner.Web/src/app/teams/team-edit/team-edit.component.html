<ft-page-header *ngIf="team" [subTitle]="team.id > 0 ? 'Edit Team' : 'Create Team'"></ft-page-header>

<div class="row">   
    <div class="col-xs-12 col-sm-8 col-md-6">
         <h3>Basic Details</h3>
         <hr>
        <form *ngIf="team"  (ngSubmit)="onSubmit()" #editForm="ngForm">
            <div *ngIf="parentTeam" class="form-group">
                <label> Parent Team: </label>
                <span class="clickable"  [routerLink]="['/teams/edit', parentTeam.id ]"> {{parentTeam.name}} </span>              
            </div>
            <div class="form-group">
                <label> Team Name: </label>
                <input type="text" class="form-control"  maxlength="50" [(ngModel)]="team.name" name="name" #name="ngModel" required />
                <div [hidden]="name.valid" class="alert alert-danger"> Name is requred </div>
            </div>
            <div class="form-group">
                <label> Desks: </label>
                <!--<p-spinner [(ngModel)]="team.desks" name="desks" #desks="ngModel" required> </p-spinner>-->
                <input type="number" class="form-control" [(ngModel)]="team.desks" name="desks" #desks="ngModel" required />
                <div [hidden]="desks.valid" class="alert alert-danger"> Desks count is requred </div>
            </div>
            <div class="form-group"> 
                <label> Email Notication: </label>
                <input type="checkbox" [(ngModel)]="team.emailNotification" name="emailNotification"/>
            </div>    
            <br />
            <button type="submit" class="btn btn-primary" [disabled]="!editForm.form.valid"> Save </button>
            <button type="button" class="btn" (click)="back()"> Back </button>
        </form>
    </div>
    <div class="col-xs-12 col-sm-4">
         <h3>Managers</h3>
         <hr>
         <ng-container *ngIf="team">
            <ft-no-data-template *ngIf="team.managers == null"> </ft-no-data-template>
            <table class="table table-condensed"> 
                <tr *ngFor="let manager of team.managers">
                    <td> {{manager.name}} </td>
                    <td class="text-right"> <a  class="btn fa fa-trash" >  </a>  </td>
                </tr>
            </table>
            <button *ngIf="team.id > 0" class="btn btn-primary"> Add </button>         
         </ng-container>
    </div>
</div>
<div class="row">  
    <div class="col-xs-12">
        <ng-container *ngIf="team && team.id > 0">
            <h3>Sub Teams <button class="btn btn-primary"  (click)="addSubTeam()"> Add </button> </h3>  
            <hr>
            <ft-team-list [parentTeamId]="team.id"></ft-team-list>
        </ng-container>
    </div>
</div>